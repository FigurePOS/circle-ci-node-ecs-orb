description: >
  terraform plan

executor: node20

parameters:
  account_id:
    type: string
    description: "AWS Account ID"
  bucket_name:
    type: string
    description: "Name of S3 Bucket with terraform state"
    default: ""
  dir:
    type: string
    default: "tf"
    description: "Dir with terraform scripts"
  env:
    type: string
    description: "Environment"
  ssh_key_fingerprint:
    type: string
    default: ""
    description: "SSH Key Fingerprint"

steps:
  - terraform_plan:
      account_id: <<parameters.account_id>>
      bucket_name: <<parameters.bucket_name>>
      dir: <<parameters.dir>>
      env: <<parameters.env>>
      ssh_key_fingerprint: <<parameters.ssh_key_fingerprint>>
